{% extends 'base.html' %}
{% load static %}

{% block title %}Shipping & Returns - {{ site_settings.site_name }}{% endblock %}

{% block meta_description %}Learn about our shipping policies, delivery options, and return procedures at {{ site_settings.site_name }}. Fast shipping, easy returns, and customer satisfaction guaranteed.{% endblock %}

{% block content %}
<!-- Breadcrumb -->
<nav aria-label="breadcrumb" class="breadcrumb-modern">
    <div class="container">
        <ol class="breadcrumb mb-0">
            <li class="breadcrumb-item">
                <a href="{% url 'shop:home' %}">
                    <i class="bi bi-house breadcrumb-icon"></i>Home
                </a>
            </li>
            <li class="breadcrumb-item active">
                <i class="bi bi-truck breadcrumb-icon"></i>Shipping & Returns
            </li>
        </ol>
    </div>
</nav>

<!-- Header -->
<section class="py-5 bg-gradient-primary text-white">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8 mx-auto text-center">
                <h1 class="display-4 fw-bold mb-3">Shipping & Returns</h1>
                <p class="lead mb-0">Fast, reliable shipping and hassle-free returns. We're committed to getting your car parts to you quickly and safely.</p>
            </div>
        </div>
    </div>
</section>

<!-- Main Content -->
<section class="py-5">
    <div class="container">
        <div class="row g-5">
            <!-- Shipping Information -->
            <div class="col-lg-6">
                <div class="card border-0 shadow-lg rounded-4 h-100">
                    <div class="card-header bg-white border-0 p-4">
                        <h3 class="fw-bold mb-2">
                            <i class="bi bi-truck me-2 text-primary"></i>Shipping Information
                        </h3>
                        <p class="text-muted mb-0">Everything you need to know about our shipping policies and delivery options.</p>
                    </div>
                    <div class="card-body p-4">
                        <!-- Free Shipping -->
                        <div class="d-flex align-items-start mb-4">
                            <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center me-3" 
                                 style="width: 50px; height: 50px; min-width: 50px;">
                                <i class="bi bi-gift text-white fs-4"></i>
                            </div>
                            <div>
                                <h5 class="fw-bold mb-2">Free Shipping</h5>
                                <p class="text-muted mb-0">Free standard shipping on all orders over ${{ site_settings.free_shipping_threshold|default:"99" }}. No minimum order required for premium members.</p>
                            </div>
                        </div>

                        <!-- Shipping Options -->
                        <div class="d-flex align-items-start mb-4">
                            <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center me-3" 
                                 style="width: 50px; height: 50px; min-width: 50px;">
                                <i class="bi bi-lightning-charge text-white fs-4"></i>
                            </div>
                            <div>
                                <h5 class="fw-bold mb-2">Shipping Options</h5>
                                <ul class="list-unstyled text-muted mb-0">
                                    <li class="mb-1"><strong>Standard Shipping:</strong> 5-7 business days - Free over ${{ site_settings.free_shipping_threshold|default:"99" }}</li>
                                    <li class="mb-1"><strong>Express Shipping:</strong> 2-3 business days - $15.99</li>
                                    <li class="mb-1"><strong>Overnight Shipping:</strong> 1 business day - $29.99</li>
                                    <li><strong>Same Day Delivery:</strong> Available in select areas - $39.99</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Processing Time -->
                        <div class="d-flex align-items-start mb-4">
                            <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center me-3" 
                                 style="width: 50px; height: 50px; min-width: 50px;">
                                <i class="bi bi-clock text-white fs-4"></i>
                            </div>
                            <div>
                                <h5 class="fw-bold mb-2">Processing Time</h5>
                                <p class="text-muted mb-0">Orders placed before 2:00 PM EST are processed the same day. Weekend orders are processed on the next business day.</p>
                            </div>
                        </div>

                        <!-- Tracking -->
                        <div class="d-flex align-items-start">
                            <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center me-3" 
                                 style="width: 50px; height: 50px; min-width: 50px;">
                                <i class="bi bi-geo-alt text-white fs-4"></i>
                            </div>
                            <div>
                                <h5 class="fw-bold mb-2">Order Tracking</h5>
                                <p class="text-muted mb-0">Track your order in real-time with our tracking system. You'll receive email notifications with tracking information once your order ships.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Returns Information -->
            <div class="col-lg-6">
                <div class="card border-0 shadow-lg rounded-4 h-100">
                    <div class="card-header bg-white border-0 p-4">
                        <h3 class="fw-bold mb-2">
                            <i class="bi bi-arrow-return-left me-2 text-primary"></i>Returns & Exchanges
                        </h3>
                        <p class="text-muted mb-0">Easy returns and exchanges with our customer-friendly policies.</p>
                    </div>
                    <div class="card-body p-4">
                        <!-- Return Policy -->
                        <div class="d-flex align-items-start mb-4">
                            <div class="bg-success rounded-circle d-flex align-items-center justify-content-center me-3" 
                                 style="width: 50px; height: 50px; min-width: 50px;">
                                <i class="bi bi-shield-check text-white fs-4"></i>
                            </div>
                            <div>
                                <h5 class="fw-bold mb-2">30-Day Return Policy</h5>
                                <p class="text-muted mb-0">Return any unused item within 30 days of delivery for a full refund. Items must be in original packaging and condition.</p>
                            </div>
                        </div>

                        <!-- Return Process -->
                        <div class="d-flex align-items-start mb-4">
                            <div class="bg-success rounded-circle d-flex align-items-center justify-content-center me-3" 
                                 style="width: 50px; height: 50px; min-width: 50px;">
                                <i class="bi bi-arrow-clockwise text-white fs-4"></i>
                            </div>
                            <div>
                                <h5 class="fw-bold mb-2">Easy Return Process</h5>
                                <ol class="text-muted mb-0 ps-3">
                                    <li>Contact our support team or initiate return online</li>
                                    <li>Print the prepaid return label</li>
                                    <li>Package the item securely</li>
                                    <li>Drop off at any authorized shipping location</li>
                                </ol>
                            </div>
                        </div>

                        <!-- Refund Timeline -->
                        <div class="d-flex align-items-start mb-4">
                            <div class="bg-success rounded-circle d-flex align-items-center justify-content-center me-3" 
                                 style="width: 50px; height: 50px; min-width: 50px;">
                                <i class="bi bi-credit-card text-white fs-4"></i>
                            </div>
                            <div>
                                <h5 class="fw-bold mb-2">Refund Processing</h5>
                                <p class="text-muted mb-0">Refunds are processed within 3-5 business days after we receive your return. Original payment method will be credited.</p>
                            </div>
                        </div>

                        <!-- Exchanges -->
                        <div class="d-flex align-items-start">
                            <div class="bg-success rounded-circle d-flex align-items-center justify-content-center me-3" 
                                 style="width: 50px; height: 50px; min-width: 50px;">
                                <i class="bi bi-arrow-left-right text-white fs-4"></i>
                            </div>
                            <div>
                                <h5 class="fw-bold mb-2">Exchanges</h5>
                                <p class="text-muted mb-0">Need a different size or part? We offer free exchanges within 30 days. Contact us to arrange an exchange.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Shipping Zones -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row mb-5">
            <div class="col-lg-8 mx-auto text-center">
                <h2 class="display-5 fw-bold mb-3">Shipping Zones & Rates</h2>
                <p class="lead text-muted">We ship nationwide with competitive rates and fast delivery times</p>
            </div>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-4 col-md-6">
                <div class="card border-0 shadow-sm rounded-4 h-100">
                    <div class="card-body text-center p-4">
                        <div class="bg-primary rounded-circle d-inline-flex align-items-center justify-content-center mb-3" 
                             style="width: 70px; height: 70px;">
                            <i class="bi bi-geo-alt text-white fs-3"></i>
                        </div>
                        <h5 class="fw-bold mb-3">Zone 1 - Local</h5>
                        <p class="text-muted mb-3">Within 50 miles of our warehouse</p>
                        <ul class="list-unstyled text-muted">
                            <li><strong>Standard:</strong> 1-2 days - $5.99</li>
                            <li><strong>Express:</strong> Same day - $19.99</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4 col-md-6">
                <div class="card border-0 shadow-sm rounded-4 h-100">
                    <div class="card-body text-center p-4">
                        <div class="bg-primary rounded-circle d-inline-flex align-items-center justify-content-center mb-3" 
                             style="width: 70px; height: 70px;">
                            <i class="bi bi-map text-white fs-3"></i>
                        </div>
                        <h5 class="fw-bold mb-3">Zone 2 - Regional</h5>
                        <p class="text-muted mb-3">Major metropolitan areas</p>
                        <ul class="list-unstyled text-muted">
                            <li><strong>Standard:</strong> 3-5 days - $8.99</li>
                            <li><strong>Express:</strong> 1-2 days - $24.99</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4 col-md-6">
                <div class="card border-0 shadow-sm rounded-4 h-100">
                    <div class="card-body text-center p-4">
                        <div class="bg-primary rounded-circle d-inline-flex align-items-center justify-content-center mb-3" 
                             style="width: 70px; height: 70px;">
                            <i class="bi bi-globe text-white fs-3"></i>
                        </div>
                        <h5 class="fw-bold mb-3">Zone 3 - National</h5>
                        <p class="text-muted mb-3">Nationwide coverage</p>
                        <ul class="list-unstyled text-muted">
                            <li><strong>Standard:</strong> 5-7 days - $12.99</li>
                            <li><strong>Express:</strong> 2-3 days - $29.99</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- FAQ Section -->
<section class="py-5">
    <div class="container">
        <div class="row mb-5">
            <div class="col-lg-8 mx-auto text-center">
                <h2 class="display-5 fw-bold mb-3">Frequently Asked Questions</h2>
                <p class="lead text-muted">Common questions about shipping and returns</p>
            </div>
        </div>
        
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div class="accordion" id="shippingFAQ">
                    <!-- FAQ Item 1 -->
                    <div class="accordion-item border-0 shadow-sm rounded-4 mb-3">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed rounded-4 fw-bold" type="button" 
                                    data-bs-toggle="collapse" data-bs-target="#faq1">
                                <i class="bi bi-question-circle me-2 text-primary"></i>
                                Can I change my shipping address after placing an order?
                            </button>
                        </h2>
                        <div id="faq1" class="accordion-collapse collapse" data-bs-parent="#shippingFAQ">
                            <div class="accordion-body">
                                Yes, you can change your shipping address within 2 hours of placing your order. Contact our customer service team immediately at <strong>{{ site_settings.contact_email|default:"support@example.com" }}</strong> or call <strong>{{ site_settings.contact_phone|default:"1-800-123-4567" }}</strong>. Once your order has been processed for shipping, address changes may not be possible.
                            </div>
                        </div>
                    </div>

                    <!-- FAQ Item 2 -->
                    <div class="accordion-item border-0 shadow-sm rounded-4 mb-3">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed rounded-4 fw-bold" type="button" 
                                    data-bs-toggle="collapse" data-bs-target="#faq2">
                                <i class="bi bi-question-circle me-2 text-primary"></i>
                                What if my item arrives damaged?
                            </button>
                        </h2>
                        <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#shippingFAQ">
                            <div class="accordion-body">
                                We take great care in packaging all items, but if your order arrives damaged, please contact us within 48 hours of delivery. Take photos of the damaged item and packaging, and we'll arrange for a replacement or full refund at no cost to you. We may also file a claim with the shipping carrier on your behalf.
                            </div>
                        </div>
                    </div>

                    <!-- FAQ Item 3 -->
                    <div class="accordion-item border-0 shadow-sm rounded-4 mb-3">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed rounded-4 fw-bold" type="button" 
                                    data-bs-toggle="collapse" data-bs-target="#faq3">
                                <i class="bi bi-question-circle me-2 text-primary"></i>
                                Do you ship internationally?
                            </button>
                        </h2>
                        <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#shippingFAQ">
                            <div class="accordion-body">
                                Currently, we only ship within the United States and its territories. We're working on expanding our international shipping options. If you're located outside the US, please contact us to discuss alternative shipping arrangements or recommendations for local distributors.
                            </div>
                        </div>
                    </div>

                    <!-- FAQ Item 4 -->
                    <div class="accordion-item border-0 shadow-sm rounded-4 mb-3">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed rounded-4 fw-bold" type="button" 
                                    data-bs-toggle="collapse" data-bs-target="#faq4">
                                <i class="bi bi-question-circle me-2 text-primary"></i>
                                Can I return an item without the original packaging?
                            </button>
                        </h2>
                        <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#shippingFAQ">
                            <div class="accordion-body">
                                For most items, original packaging is required for returns. However, we understand that sometimes packaging may be damaged or discarded. Contact our customer service team to discuss your specific situation. We may be able to accept the return with alternative packaging or documentation.
                            </div>
                        </div>
                    </div>

                    <!-- FAQ Item 5 -->
                    <div class="accordion-item border-0 shadow-sm rounded-4">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed rounded-4 fw-bold" type="button" 
                                    data-bs-toggle="collapse" data-bs-target="#faq5">
                                <i class="bi bi-question-circle me-2 text-primary"></i>
                                How long does it take to process a refund?
                            </button>
                        </h2>
                        <div id="faq5" class="accordion-collapse collapse" data-bs-parent="#shippingFAQ">
                            <div class="accordion-body">
                                Once we receive your returned item, we'll inspect it and process your refund within 3-5 business days. The refund will be credited to your original payment method. Depending on your bank or credit card company, it may take an additional 3-7 business days for the refund to appear on your statement.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Contact CTA -->
<section class="py-5" style="background: var(--gradient-primary);">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center text-white">
                <h2 class="display-5 fw-bold mb-4">Still Have Questions?</h2>
                <p class="lead mb-4">Our customer service team is here to help with any shipping or return questions you may have.</p>
                <div class="d-flex justify-content-center gap-3">
                    <a href="{% url 'shop:contact' %}" class="btn btn-light btn-lg">
                        <i class="bi bi-chat-dots me-2"></i>Contact Support
                    </a>
                    <a href="tel:{{ site_settings.contact_phone|default:'1-800-123-4567' }}" class="btn btn-outline-light btn-lg">
                        <i class="bi bi-telephone me-2"></i>Call Us Now
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_css %}
<style>
.bg-gradient-primary {
    background: var(--gradient-primary);
}

.card {
    backdrop-filter: blur(10px);
    background: rgba(255, 255, 255, 0.95);
}

.accordion-button {
    background: rgba(255, 255, 255, 0.95);
    border: none;
    box-shadow: none;
}

.accordion-button:not(.collapsed) {
    background: var(--gradient-primary);
    color: white;
}

.accordion-button:not(.collapsed) .text-primary {
    color: white !important;
}

.accordion-button:focus {
    box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
}

.accordion-item {
    overflow: hidden;
}

.btn-outline-light:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(255, 255, 255, 0.2);
}

/* Animation for feature icons */
.bg-primary.rounded-circle,
.bg-success.rounded-circle {
    transition: all 0.3s ease;
}

.bg-primary.rounded-circle:hover,
.bg-success.rounded-circle:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(255, 107, 53, 0.3);
}

@media (max-width: 768px) {
    .display-4 {
        font-size: 2.5rem;
    }
    
    .card-body {
        padding: 1.5rem !important;
    }
    
    .d-flex.gap-3 {
        gap: 1rem !important;
    }
    
    .accordion-button {
        font-size: 0.9rem;
        padding: 1rem;
    }
}
</style>
{% endblock %}

{% block extra_js %}
<script>
$(document).ready(function() {
    // Smooth scroll for anchor links
    $('a[href^="#"]').on('click', function(e) {
        e.preventDefault();
        const target = $($(this).attr('href'));
        if (target.length) {
            $('html, body').animate({
                scrollTop: target.offset().top - 100
            }, 500);
        }
    });
    
    // Add animation to cards on scroll
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);
    
    // Observe cards and accordion items
    $('.card, .accordion-item').each(function() {
        this.style.opacity = '0';
        this.style.transform = 'translateY(30px)';
        this.style.transition = 'all 0.6s ease';
        observer.observe(this);
    });
    
    // Enhanced accordion behavior
    $('.accordion-button').on('click', function() {
        const target = $($(this).attr('data-bs-target'));
        const icon = $(this).find('.bi');
        
        // Animate icon rotation
        if ($(this).hasClass('collapsed')) {
            icon.css('transform', 'rotate(0deg)');
        } else {
            icon.css('transform', 'rotate(180deg)');
        }
    });
});
</script>
{% endblock %}