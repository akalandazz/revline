{% extends 'base.html' %}
{% load static %}

{% block title %}FAQ - {{ site_settings.site_name }}{% endblock %}

{% block meta_description %}Frequently asked questions about {{ site_settings.site_name }}. Find answers to common questions about our products, orders, shipping, returns, and technical support.{% endblock %}

{% block content %}
<!-- Breadcrumb -->
<nav aria-label="breadcrumb" class="py-3 bg-light">
    <div class="container">
        <ol class="breadcrumb mb-0">
            <li class="breadcrumb-item"><a href="{% url 'shop:home' %}">Home</a></li>
            <li class="breadcrumb-item active">FAQ</li>
        </ol>
    </div>
</nav>

<!-- Header -->
<section class="py-5 bg-gradient-primary text-white">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8 mx-auto text-center">
                <h1 class="display-4 fw-bold mb-3">Frequently Asked Questions</h1>
                <p class="lead mb-0">Find answers to the most common questions about our products, services, and policies. Can't find what you're looking for? Contact our support team.</p>
            </div>
        </div>
    </div>
</section>

<!-- Search FAQ -->
<section class="py-4 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 mx-auto">
                <div class="input-group input-group-lg">
                    <input type="text" class="form-control search-bar" id="faqSearch" placeholder="Search FAQ...">
                    <button class="btn btn-primary" type="button">
                        <i class="bi bi-search"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- FAQ Categories -->
<section class="py-5">
    <div class="container">
        <div class="row mb-5">
            <div class="col-12 text-center">
                <h2 class="display-5 fw-bold mb-3">Browse by Category</h2>
                <p class="lead text-muted">Select a category to find relevant answers quickly</p>
            </div>
        </div>
        
        <div class="row g-4 mb-5">
            <div class="col-lg-3 col-md-6">
                <div class="card border-0 shadow-sm rounded-4 h-100 category-card" data-category="orders">
                    <div class="card-body text-center p-4">
                        <div class="bg-primary rounded-circle d-inline-flex align-items-center justify-content-center mb-3" 
                             style="width: 70px; height: 70px;">
                            <i class="bi bi-cart-check text-white fs-3"></i>
                        </div>
                        <h5 class="fw-bold mb-2">Orders & Payment</h5>
                        <p class="text-muted mb-0">Questions about placing orders, payment methods, and order status</p>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="card border-0 shadow-sm rounded-4 h-100 category-card" data-category="products">
                    <div class="card-body text-center p-4">
                        <div class="bg-primary rounded-circle d-inline-flex align-items-center justify-content-center mb-3" 
                             style="width: 70px; height: 70px;">
                            <i class="bi bi-gear text-white fs-3"></i>
                        </div>
                        <h5 class="fw-bold mb-2">Products & Parts</h5>
                        <p class="text-muted mb-0">Information about our car parts, compatibility, and specifications</p>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="card border-0 shadow-sm rounded-4 h-100 category-card" data-category="shipping">
                    <div class="card-body text-center p-4">
                        <div class="bg-primary rounded-circle d-inline-flex align-items-center justify-content-center mb-3" 
                             style="width: 70px; height: 70px;">
                            <i class="bi bi-truck text-white fs-3"></i>
                        </div>
                        <h5 class="fw-bold mb-2">Shipping & Returns</h5>
                        <p class="text-muted mb-0">Delivery options, tracking, returns, and exchange policies</p>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="card border-0 shadow-sm rounded-4 h-100 category-card" data-category="account">
                    <div class="card-body text-center p-4">
                        <div class="bg-primary rounded-circle d-inline-flex align-items-center justify-content-center mb-3" 
                             style="width: 70px; height: 70px;">
                            <i class="bi bi-person-circle text-white fs-3"></i>
                        </div>
                        <h5 class="fw-bold mb-2">Account & Support</h5>
                        <p class="text-muted mb-0">Account management, technical support, and general inquiries</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- FAQ Content -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-lg-10 mx-auto">
                <!-- Orders & Payment FAQ -->
                <div class="faq-category mb-5" data-category="orders">
                    <h3 class="fw-bold mb-4 text-center">
                        <i class="bi bi-cart-check me-2 text-primary"></i>Orders & Payment
                    </h3>
                    
                    <div class="accordion" id="ordersAccordion">
                        <div class="accordion-item border-0 shadow-sm rounded-4 mb-3">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed rounded-4 fw-bold" type="button" 
                                        data-bs-toggle="collapse" data-bs-target="#order1">
                                    How do I place an order?
                                </button>
                            </h2>
                            <div id="order1" class="accordion-collapse collapse" data-bs-parent="#ordersAccordion">
                                <div class="accordion-body">
                                    Placing an order is easy! Browse our products, add items to your cart, and proceed to checkout. You'll need to create an account or log in, provide shipping information, and select your payment method. Once you confirm your order, you'll receive an email confirmation with your order details and tracking information.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item border-0 shadow-sm rounded-4 mb-3">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed rounded-4 fw-bold" type="button" 
                                        data-bs-toggle="collapse" data-bs-target="#order2">
                                    What payment methods do you accept?
                                </button>
                            </h2>
                            <div id="order2" class="accordion-collapse collapse" data-bs-parent="#ordersAccordion">
                                <div class="accordion-body">
                                    We accept all major credit cards (Visa, MasterCard, American Express, Discover), PayPal, Apple Pay, Google Pay, and bank transfers. All payments are processed securely through encrypted connections. We do not store your payment information on our servers.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item border-0 shadow-sm rounded-4 mb-3">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed rounded-4 fw-bold" type="button" 
                                        data-bs-toggle="collapse" data-bs-target="#order3">
                                    Can I modify or cancel my order?
                                </button>
                            </h2>
                            <div id="order3" class="accordion-collapse collapse" data-bs-parent="#ordersAccordion">
                                <div class="accordion-body">
                                    You can modify or cancel your order within 2 hours of placing it, provided it hasn't been processed for shipping. Contact our customer service team immediately at <strong>{{ site_settings.contact_email|default:"support@example.com" }}</strong> or call <strong>{{ site_settings.contact_phone|default:"1-800-123-4567" }}</strong>. Once an order is shipped, you'll need to follow our return process.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item border-0 shadow-sm rounded-4 mb-3">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed rounded-4 fw-bold" type="button" 
                                        data-bs-toggle="collapse" data-bs-target="#order4">
                                    How can I track my order?
                                </button>
                            </h2>
                            <div id="order4" class="accordion-collapse collapse" data-bs-parent="#ordersAccordion">
                                <div class="accordion-body">
                                    Once your order ships, you'll receive an email with tracking information. You can also track your order by logging into your account and viewing your order history. Our tracking system provides real-time updates on your package's location and estimated delivery date.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Products & Parts FAQ -->
                <div class="faq-category mb-5" data-category="products">
                    <h3 class="fw-bold mb-4 text-center">
                        <i class="bi bi-gear me-2 text-primary"></i>Products & Parts
                    </h3>
                    
                    <div class="accordion" id="productsAccordion">
                        <div class="accordion-item border-0 shadow-sm rounded-4 mb-3">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed rounded-4 fw-bold" type="button" 
                                        data-bs-toggle="collapse" data-bs-target="#product1">
                                    How do I know if a part is compatible with my car?
                                </button>
                            </h2>
                            <div id="product1" class="accordion-collapse collapse" data-bs-parent="#productsAccordion">
                                <div class="accordion-body">
                                    Each product page includes detailed compatibility information. Use our vehicle selector tool or check the product specifications against your car's make, model, year, and engine type. If you're unsure, contact our technical support team with your VIN number, and we'll help you find the right parts.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item border-0 shadow-sm rounded-4 mb-3">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed rounded-4 fw-bold" type="button" 
                                        data-bs-toggle="collapse" data-bs-target="#product2">
                                    Are your parts genuine or aftermarket?
                                </button>
                            </h2>
                            <div id="product2" class="accordion-collapse collapse" data-bs-parent="#productsAccordion">
                                <div class="accordion-body">
                                    We carry both genuine OEM parts and high-quality aftermarket parts from trusted manufacturers. Each product listing clearly indicates whether it's OEM or aftermarket. Our aftermarket parts meet or exceed OEM specifications and come with manufacturer warranties.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item border-0 shadow-sm rounded-4 mb-3">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed rounded-4 fw-bold" type="button" 
                                        data-bs-toggle="collapse" data-bs-target="#product3">
                                    Do you provide installation instructions?
                                </button>
                            </h2>
                            <div id="product3" class="accordion-collapse collapse" data-bs-parent="#productsAccordion">
                                <div class="accordion-body">
                                    Yes! Most products include installation instructions or links to detailed guides. We also have video tutorials for common installations on our YouTube channel. For complex installations, we recommend consulting with a qualified mechanic or automotive technician.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item border-0 shadow-sm rounded-4 mb-3">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed rounded-4 fw-bold" type="button" 
                                        data-bs-toggle="collapse" data-bs-target="#product4">
                                    What warranty do your products come with?
                                </button>
                            </h2>
                            <div id="product4" class="accordion-collapse collapse" data-bs-parent="#productsAccordion">
                                <div class="accordion-body">
                                    Warranty periods vary by manufacturer and product type. Most parts come with a 1-3 year warranty, while some performance parts may have different terms. Warranty information is listed on each product page. We also offer our own 30-day satisfaction guarantee on all purchases.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Shipping & Returns FAQ -->
                <div class="faq-category mb-5" data-category="shipping">
                    <h3 class="fw-bold mb-4 text-center">
                        <i class="bi bi-truck me-2 text-primary"></i>Shipping & Returns
                    </h3>
                    
                    <div class="accordion" id="shippingAccordion">
                        <div class="accordion-item border-0 shadow-sm rounded-4 mb-3">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed rounded-4 fw-bold" type="button" 
                                        data-bs-toggle="collapse" data-bs-target="#shipping1">
                                    How much does shipping cost?
                                </button>
                            </h2>
                            <div id="shipping1" class="accordion-collapse collapse" data-bs-parent="#shippingAccordion">
                                <div class="accordion-body">
                                    We offer free standard shipping on orders over ${{ site_settings.free_shipping_threshold|default:"99" }}. For orders under this amount, standard shipping is $8.99. Express shipping (2-3 days) is $15.99, and overnight shipping is $29.99. Shipping costs are calculated at checkout based on your location and selected delivery speed.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item border-0 shadow-sm rounded-4 mb-3">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed rounded-4 fw-bold" type="button" 
                                        data-bs-toggle="collapse" data-bs-target="#shipping2">
                                    How long does delivery take?
                                </button>
                            </h2>
                            <div id="shipping2" class="accordion-collapse collapse" data-bs-parent="#shippingAccordion">
                                <div class="accordion-body">
                                    Standard shipping takes 5-7 business days, express shipping takes 2-3 business days, and overnight shipping delivers the next business day. Orders placed before 2:00 PM EST are processed the same day. Weekend orders are processed on the next business day.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item border-0 shadow-sm rounded-4 mb-3">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed rounded-4 fw-bold" type="button" 
                                        data-bs-toggle="collapse" data-bs-target="#shipping3">
                                    What is your return policy?
                                </button>
                            </h2>
                            <div id="shipping3" class="accordion-collapse collapse" data-bs-parent="#shippingAccordion">
                                <div class="accordion-body">
                                    We offer a 30-day return policy on all unused items in original packaging. Returns are easy - just contact us to initiate the process, print the prepaid return label, and send the item back. Refunds are processed within 3-5 business days after we receive your return.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item border-0 shadow-sm rounded-4 mb-3">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed rounded-4 fw-bold" type="button" 
                                        data-bs-toggle="collapse" data-bs-target="#shipping4">
                                    Do you ship internationally?
                                </button>
                            </h2>
                            <div id="shipping4" class="accordion-collapse collapse" data-bs-parent="#shippingAccordion">
                                <div class="accordion-body">
                                    Currently, we only ship within the United States and its territories. We're working on expanding our international shipping options. If you're located outside the US, please contact us to discuss alternative arrangements or local distributor recommendations.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Account & Support FAQ -->
                <div class="faq-category mb-5" data-category="account">
                    <h3 class="fw-bold mb-4 text-center">
                        <i class="bi bi-person-circle me-2 text-primary"></i>Account & Support
                    </h3>
                    
                    <div class="accordion" id="accountAccordion">
                        <div class="accordion-item border-0 shadow-sm rounded-4 mb-3">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed rounded-4 fw-bold" type="button" 
                                        data-bs-toggle="collapse" data-bs-target="#account1">
                                    Do I need an account to place an order?
                                </button>
                            </h2>
                            <div id="account1" class="accordion-collapse collapse" data-bs-parent="#accountAccordion">
                                <div class="accordion-body">
                                    While you can browse our products without an account, you'll need to create one to place an order. Having an account allows you to track orders, save your shipping information, create wishlists, and access exclusive member benefits. Registration is quick and free!
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item border-0 shadow-sm rounded-4 mb-3">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed rounded-4 fw-bold" type="button" 
                                        data-bs-toggle="collapse" data-bs-target="#account2">
                                    How do I reset my password?
                                </button>
                            </h2>
                            <div id="account2" class="accordion-collapse collapse" data-bs-parent="#accountAccordion">
                                <div class="accordion-body">
                                    Click on "Forgot Password" on the login page and enter your email address. We'll send you a secure link to reset your password. If you don't receive the email within a few minutes, check your spam folder or contact our support team for assistance.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item border-0 shadow-sm rounded-4 mb-3">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed rounded-4 fw-bold" type="button" 
                                        data-bs-toggle="collapse" data-bs-target="#account3">
                                    How can I contact customer support?
                                </button>
                            </h2>
                            <div id="account3" class="accordion-collapse collapse" data-bs-parent="#accountAccordion">
                                <div class="accordion-body">
                                    You can reach our customer support team via email at <strong>{{ site_settings.contact_email|default:"support@example.com" }}</strong>, phone at <strong>{{ site_settings.contact_phone|default:"1-800-123-4567" }}</strong>, or through our contact form. Our support hours are Monday-Friday 9 AM-6 PM, Saturday 10 AM-4 PM EST.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item border-0 shadow-sm rounded-4 mb-3">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed rounded-4 fw-bold" type="button" 
                                        data-bs-toggle="collapse" data-bs-target="#account4">
                                    Is my personal information secure?
                                </button>
                            </h2>
                            <div id="account4" class="accordion-collapse collapse" data-bs-parent="#accountAccordion">
                                <div class="accordion-body">
                                    Absolutely! We use industry-standard SSL encryption to protect your personal and payment information. We never share your data with third parties without your consent, and we comply with all applicable privacy regulations. You can read our full privacy policy for more details.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Still Need Help Section -->
<section class="py-5" style="background: var(--gradient-primary);">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center text-white">
                <h2 class="display-5 fw-bold mb-4">Still Need Help?</h2>
                <p class="lead mb-4">Can't find the answer you're looking for? Our expert support team is here to help you with any questions or concerns.</p>
                <div class="d-flex justify-content-center gap-3">
                    <a href="{% url 'shop:contact' %}" class="btn btn-light btn-lg">
                        <i class="bi bi-chat-dots me-2"></i>Contact Support
                    </a>
                    <a href="tel:{{ site_settings.contact_phone|default:'1-800-123-4567' }}" class="btn btn-outline-light btn-lg">
                        <i class="bi bi-telephone me-2"></i>Call Us Now
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_css %}
<style>
.bg-gradient-primary {
    background: var(--gradient-primary);
}

.card {
    backdrop-filter: blur(10px);
    background: rgba(255, 255, 255, 0.95);
}

.category-card {
    cursor: pointer;
    transition: all 0.3s ease;
}

.category-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 40px rgba(0,0,0,0.15);
}

.category-card.active {
    background: var(--gradient-primary);
    color: white;
}

.category-card.active .text-muted {
    color: rgba(255, 255, 255, 0.8) !important;
}

.category-card.active .bg-primary {
    background: rgba(255, 255, 255, 0.2) !important;
}

.accordion-button {
    background: rgba(255, 255, 255, 0.95);
    border: none;
    box-shadow: none;
}

.accordion-button:not(.collapsed) {
    background: var(--gradient-primary);
    color: white;
}

.accordion-button:focus {
    box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
}

.accordion-item {
    overflow: hidden;
}

.faq-category {
    display: none;
}

.faq-category.active {
    display: block;
}

.search-bar {
    border-radius: 50px;
    border: 2px solid transparent;
    background: rgba(255,255,255,0.9);
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
}

.search-bar:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 20px rgba(255, 107, 53, 0.2);
}

.btn-outline-light:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(255, 255, 255, 0.2);
}

/* Animation for feature icons */
.bg-primary.rounded-circle {
    transition: all 0.3s ease;
}

.bg-primary.rounded-circle:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(255, 107, 53, 0.3);
}

@media (max-width: 768px) {
    .display-4 {
        font-size: 2.5rem;
    }
    
    .card-body {
        padding: 1.5rem !important;
    }
    
    .d-flex.gap-3 {
        gap: 1rem !important;
    }
    
    .accordion-button {
        font-size: 0.9rem;
        padding: 1rem;
    }
}
</style>
{% endblock %}

{% block extra_js %}
<script>
$(document).ready(function() {
    // Show all categories by default
    $('.faq-category').addClass('active');
    
    // Category filtering
    $('.category-card').on('click', function() {
        const category = $(this).data('category');
        
        // Update active category card
        $('.category-card').removeClass('active');
        $(this).addClass('active');
        
        // Show/hide FAQ sections
        $('.faq-category').removeClass('active');
        $(`.faq-category[data-category="${category}"]`).addClass('active');
        
        // Scroll to FAQ section
        $('html, body').animate({
            scrollTop: $('.faq-category.active').offset().top - 100
        }, 500);
    });
    
    // Show all categories when clicking outside
    $(document).on('click', function(e) {
        if (!$(e.target).closest('.category-card').length) {
            $('.category-card').removeClass('active');
            $('.faq-category').addClass('active');
        }
    });
    
    // FAQ Search functionality
    $('#faqSearch').on('input', function() {
        const searchTerm = $(this).val().toLowerCase();
        
        if (searchTerm === '') {
            // Show all if search is empty
            $('.accordion-item').show();
            $('.faq-category').addClass('active');
            $('.category-card').removeClass('active');
        } else {
            // Hide all first
            $('.accordion-item').hide();
            $('.faq-category').removeClass('active');
            
            // Search through accordion buttons and content
            $('.accordion-button, .accordion-body').each(function() {
                const text = $(this).text().toLowerCase();
                if (text.includes(searchTerm)) {
                    const accordionItem = $(this).closest('.accordion-item');
                    const category = $(this).closest('.faq-category');
                    
                    accordionItem.show();
                    category.addClass('active');
                }
            });
        }
    });
    
    // Smooth scroll for anchor links
    $('a[href^="#"]').on('click', function(e) {
        e.preventDefault();
        const target = $($(this).attr('href'));
        if (target.length) {
            $('html, body').animate({
                scrollTop: target.offset().top - 100
            }, 500);
        }
    });
    
    // Add animation to cards on scroll
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);
    
    // Observe cards and accordion items
    $('.card, .accordion-item').each(function() {
        this.style.opacity = '0';
        this.style.transform = 'translateY(30px)';
        this.style.transition = 'all 0.6s ease';
        observer.observe(this);
    });
    
    // Enhanced accordion behavior
    $('.accordion-button').on('click', function() {
        const target = $($(this).attr('data-bs-target'));
        const icon = $(this).find('.bi');
        
        // Animate icon rotation
        if ($(this).hasClass('collapsed')) {
            icon.css('transform', 'rotate(0deg)');
        } else {
            icon.css('transform', 'rotate(180deg)');
        }
    });
});
</script>
{% endblock %}